import { mathjax } from '../../mathjax.js';
import { context } from '../context.js';
let root = 'file://' +
    context
        .path(__dirname)
        .replace(/\/[^/]*\/[^/]*$/, '/')
        .replace(/^file:\/\//, '');
if (!mathjax.asyncLoad && typeof System !== 'undefined' && System.import) {
    mathjax.asyncLoad = (name) => {
        const file = (name.charAt(0) === '.' ? new URL(name, root) : new URL(name, 'file://')).href;
        return System.import(file).then((result) => { var _a; return (_a = result.default) !== null && _a !== void 0 ? _a : result; });
    };
}
export function setBaseURL(url) {
    root = new URL(context.path(url), 'file://').href;
    if (!root.match(/\/$/)) {
        root += '/';
    }
}
//# sourceMappingURL=system.js.map