"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setBaseURL = setBaseURL;
var mathjax_js_1 = require("../../mathjax.js");
var context_js_1 = require("../context.js");
var root = 'file://' +
    context_js_1.context
        .path(__dirname)
        .replace(/\/[^/]*\/[^/]*$/, '/')
        .replace(/^file:\/\//, '');
if (!mathjax_js_1.mathjax.asyncLoad && typeof System !== 'undefined' && System.import) {
    mathjax_js_1.mathjax.asyncLoad = function (name) {
        var file = (name.charAt(0) === '.' ? new URL(name, root) : new URL(name, 'file://')).href;
        return System.import(file).then(function (result) { var _a; return (_a = result.default) !== null && _a !== void 0 ? _a : result; });
    };
}
function setBaseURL(url) {
    root = new URL(context_js_1.context.path(url), 'file://').href;
    if (!root.match(/\/$/)) {
        root += '/';
    }
}
//# sourceMappingURL=system.js.map